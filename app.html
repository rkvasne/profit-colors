<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor RGB para ProfitChart</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
    <!-- Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/imask"></script>
    <meta name="description" content="Converta cores RGB e Hex para o formato num√©rico do ProfitChart (Nelogica). Ferramenta gratuita, online e offline para traders.">
    <meta name="keywords" content="ProfitChart, Nelogica, RGB, Hex, Cores, Conversor, Trading, Setup, Layout, Profit">
    <meta name="author" content="Raphael Kvasne">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rkvasne.github.io/profit-colors/app.html">
    <meta property="og:title" content="üé® Conversor de Cores para ProfitChart">
    <meta property="og:description" content="Ferramenta essencial para personalizar seu ProfitChart. Converta RGB e Hex para o c√≥digo nativo da plataforma.">
    <meta property="og:image" content="https://rkvasne.github.io/profit-colors/preview-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://rkvasne.github.io/profit-colors/app.html">
    <meta property="twitter:title" content="üé® Conversor de Cores para ProfitChart">
    <meta property="twitter:description" content="Ferramenta essencial para personalizar seu ProfitChart. Converta RGB e Hex para o c√≥digo nativo da plataforma.">
    <meta property="twitter:image" content="https://rkvasne.github.io/profit-colors/preview-image.png">
    <meta name="theme-color" content="#0f172a">
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #10b981;
            --border: #334155;
            --gradient-start: #3b82f6;
            --gradient-end: #8b5cf6;
            
            /* Mantendo vari√°veis antigas mapeadas para as novas para compatibilidade */
            --container-bg: var(--bg-card);
            --text-color: var(--text-primary);
            --border-color: var(--border);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --table-header-bg: var(--bg-dark);
            --table-border: var(--border);
            --table-highlight: rgba(59, 130, 246, 0.1);
            --input-bg: var(--bg-dark);
            --footer-bg: var(--bg-dark);
        }

        /* Removendo tema claro antigo e for√ßando tema dark moderno */
        html, body {
            margin: 0;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 80px 20px 20px; /* Padding top aumentado para navbar */
            gap: 20px;
        }

        /* Navbar */
        nav {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo span {
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: 0.95rem;
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        .container {
            position: relative;
            background: var(--bg-card);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid var(--border);
            width: 100%;
            max-width: 900px;
            text-align: center;
        }

        h1 {
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            font-weight: 700;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Input Styles */
        .input-group input,
        #rgbSingle,
        #hexInput {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            color: var(--text-primary);
            border-radius: 8px;
            padding: 12px;
            font-family: 'Inter', monospace;
            font-size: 1rem;
        }

        .input-group input:focus,
        #rgbSingle:focus,
        #hexInput:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
            outline: none;
        }

        label {
            color: var(--text-secondary) !important;
            font-weight: 500;
            font-size: 0.875rem !important;
            margin-bottom: 8px !important;
        }

        /* Color Picker */
        .color-picker-container canvas {
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        /* Result Area */
        #result {
            background: var(--bg-dark);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-top: 20px;
            font-family: 'Inter', monospace;
            font-size: 1.2rem;
            color: var(--accent);
        }

        #result strong {
            color: var(--text-primary);
        }

        /* History */
        .color-history-container {
            background: var(--bg-dark);
            border: 1px solid var(--border);
        }

        .history-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
        }

        .history-item:hover {
            border-color: var(--accent);
            transform: translateY(-1px);
        }

        /* Table */
        .color-table {
            background: var(--bg-card);
            border: 1px solid var(--border);
        }

        .color-table th {
            background: var(--bg-dark);
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            padding: 1rem;
        }

        .color-table td {
            border-color: var(--border);
            padding: 1rem;
        }

        .color-table tr:hover {
            background-color: rgba(255, 255, 255, 0.02);
        }

        /* Buttons */
        .copy-icon {
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .copy-icon:hover {
            color: var(--accent);
            transform: scale(1.1);
        }

        /* Footer */
        footer {
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            margin-top: auto;
            width: 100%;
            padding: 2rem;
        }

        .footer-info a {
            color: var(--text-secondary);
        }

        .footer-info a:hover {
            color: var(--accent);
            background: rgba(59, 130, 246, 0.1);
        }

        /* Hide old theme button */
        .theme-button {
            display: none;
        }

        .share-button {
            color: var(--text-secondary);
        }
        
        .share-button:hover {
            color: var(--accent);
        }
    </style>

        @media (max-width: 768px) {
            .color-picker-container {
                width: 100%;
            }

            #colorPicker {
                width: 100%;
                max-width: 300px;
                height: auto;
                aspect-ratio: 1;
            }

            #huePicker {
                width: 100%;
                max-width: 300px;
                height: 30px;
            }

            .input-section {
                flex-direction: column;
                align-items: center;
            }
        }

        .share-button {
            position: absolute;
            right: 20px;
            top: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: var(--text-color);
            transition: color 0.3s;
            padding: 10px;
        }

        .share-button:hover {
            color: #4a90e2;
        }

        .theme-button {
            position: absolute;
            right: 70px;
            top: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: var(--text-color);
            transition: color 0.3s;
            padding: 10px;
        }

        .theme-button:hover {
            color: #4a90e2;
        }

        .container {
            position: relative;
            background: var(--container-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            width: 100%;
            max-width: 900px;
            text-align: center;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        h1 {
            font-size: 24px;
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .input-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .input-group input,
        #rgbSingle,
        #hexInput {
            width: 70px;
            padding: 10px;
            font-size: 14px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            text-align: center;
            transition: border-color 0.3s, box-shadow 0.3s;
            background: var(--input-bg);
            color: var(--text-color);
        }

        #rgbSingle {
            width: 160px;
        }

        #hexInput {
            width: 90px;
            text-transform: uppercase;
        }

        .input-group input:focus,
        #rgbSingle:focus,
        #hexInput:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
            outline: none;
        }

        .input-group label,
        #rgbSingleLabel,
        label[for="hexInput"] {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 5px;
            display: block;
        }

        .copy-icon {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            vertical-align: middle;
            margin-left: 5px;
            color: #999;
            transition: transform 0.2s ease, color 0.2s ease;
            font-size: 20px;
        }

        .copy-icon:hover {
            transform: scale(1.1);
        }

        .copy-icon:active {
            transform: scale(0.95);
        }

        #colorPreview {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #e0e0e0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        #colorPreview:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        #result {
            font-size: 16px;
            color: var(--text-color);
            margin-top: 10px;
            font-weight: 500;
        }

        .error {
            color: #e74c3c;
        }

        .color-table {
            margin: 20px auto;
            width: 100%;
            max-width: 700px;
            border-collapse: collapse;
            background: var(--container-bg);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border-color: var(--table-border);
        }

        .color-table th,
        .color-table td {
            padding: 10px;
            border: 1px solid var(--table-border);
            font-size: 14px;
            text-align: center;
            color: var(--text-color);
        }

        .color-table th {
            background: var(--table-header-bg);
            color: #fff;
            font-weight: 600;
        }

        .color-swatch {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .color-swatch:hover {
            transform: scale(1.8);
            z-index: 1;
        }

        .copy-column {
            width: 30px;
            border: none;
            padding: 0;
        }

        .highlighted-row {
            background-color: var(--table-highlight) !important;
            transition: background-color 0.3s ease;
        }

        .color-table tr {
            background-color: transparent;
            transition: background-color 0.3s ease;
        }

        .copy-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 9999;
            pointer-events: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
        }

        .preview-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 15px auto;
            position: relative;
            width: fit-content;
        }

        .copy-preview {
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #999;
            font-size: 20px;
            transition: color 0.3s;
            padding: 5px;
        }

        .copy-preview:hover {
            color: #666;
        }

        .color-picker-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px auto;
            width: fit-content;
        }

        #colorPicker {
            width: 250px;
            height: 250px;
            border-radius: 8px;
            cursor: crosshair;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #huePicker {
            width: 250px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        footer {
            background: var(--footer-bg);
            padding: 20px;
            margin-top: 40px;
            border-radius: 15px;
            font-size: 14px;
            color: var(--text-secondary);
            width: 100%;
            max-width: 900px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .footer-info {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 10px 0;
        }

        .developer-info {
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .developer-info i {
            color: #4a90e2;
        }

        .footer-info a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #4a90e2;
            text-decoration: none;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .footer-info a:hover {
            background-color: rgba(74, 144, 226, 0.1);
        }

        .copyright {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
            text-align: center;
        }

        .color-history-section {
            margin: 30px auto;
            width: 100%;
            max-width: 600px;
            padding: 0 15px;
        }

        .color-history-section h2 {
            font-size: 16px;
            color: var(--text-color);
            margin-bottom: 12px;
            text-align: center;
        }

        .color-history-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            padding: 12px;
            background: var(--container-bg);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            align-items: center;
            padding: 8px;
            background: var(--container-bg);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px var(--shadow-color);
        }

        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            margin-right: 8px;
            border: 1px solid var(--border-color);
        }

        .color-info {
            display: flex;
            flex-direction: column;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .color-history-container::-webkit-scrollbar {
            width: 6px;
        }

        .color-history-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }

        .color-history-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        .color-history-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 768px) {
            .color-history-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }

        #huePicker {
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin: 10px 0;
            position: relative;
            padding: 5px 0;
            /* Adicionando padding para os marcadores */
        }

        /* Estilos para o tooltip de ajuda */
        .tooltip-container {
            position: fixed;
            left: 20px;
            top: 20px;
            z-index: 1000;
        }

        .help-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: var(--text-color);
            padding: 10px;
            transition: color 0.3s;
        }

        .help-button:hover {
            color: #4a90e2;
        }

        .help-content {
            position: absolute;
            left: 50px;
            top: 0;
            background: var(--container-bg);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px var(--shadow-color);
            display: none;
            min-width: 200px;
        }

        .help-content.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .help-content h3 {
            margin: 0 0 10px 0;
            color: var(--text-color);
            font-size: 16px;
        }

        .help-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .help-content li {
            margin: 8px 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        kbd {
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 2px 5px;
            font-size: 12px;
            color: var(--text-color);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>

<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-palette"></i>
                Profit<span>Colors</span>
            </a>
            <div class="nav-links">
                <a href="index.html#features">Recursos</a>
                <a href="index.html#about">Desenvolvedor</a>
                <a href="https://github.com/rkvasne/profit-colors" target="_blank">GitHub</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <button class="share-button" onclick="shareUrl()" title="Compartilhar">
            <i class="fas fa-share-alt"></i>
        </button>

        <h1>Conversor RGB para ProfitChart</h1>
        <div class="input-section">
            <div>
                <label for="hexInput">Hex (#)</label>
                <input type="text" id="hexInput" value="#000000" maxlength="7" placeholder="#000000">
            </div>
            <div>
                <label for="rgbSingle" id="rgbSingleLabel">RGB (ex: 000, 000, 000)</label>
                <input type="text" id="rgbSingle" value="0, 0, 0">
            </div>
            <div class="input-group">
                <div>
                    <label for="red">R</label>
                    <input type="number" id="red" min="0" max="255" value="0" placeholder="0-255">
                </div>
                <div>
                    <label for="green">G</label>
                    <input type="number" id="green" min="0" max="255" value="0" placeholder="0-255">
                </div>
                <div>
                    <label for="blue">B</label>
                    <input type="number" id="blue" min="0" max="255" value="0" placeholder="0-255">
                </div>
            </div>
        </div>

        <div class="color-picker-container" role="application" aria-label="Seletor de cor">
            <canvas id="colorPicker" width="250" height="250" role="img" aria-label="√Årea de sele√ß√£o de cor"></canvas>
            <canvas id="huePicker" width="250" height="30" role="img" aria-label="Seletor de matiz"></canvas>
        </div>

        <div class="preview-wrapper">
            <div id="colorPreview" onclick="copyColorFromPreview()"></div>
            <button class="copy-preview" onclick="copyColorFromPreview()">
                <i class="far fa-copy"></i>
            </button>
        </div>
        <div id="result"></div>
        <div class="color-history-section">
            <h2>Hist√≥rico de Cores</h2>
            <div id="colorHistory" class="color-history-container"></div>
        </div>
        <table class="color-table" id="colorTable">
            <thead>
                <tr>
                    <th>Hue</th>
                    <th>Hex</th>
                    <th>RGB</th>
                    <th>Pr√©via</th>
                    <th></th>
                    <th>C√≥digo ProfitChart</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <!-- A tabela ser√° preenchida dinamicamente -->
            </tbody>
        </table>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <span class="developer-info">
                    <i class="fas fa-code"></i>
                    By Raphael Kvasne
                    <i class="fas fa-terminal"></i>
                </span>
                <a href="mailto:rkvasne@gmail.com">
                    <i class="far fa-envelope"></i>
                    rkvasne@gmail.com
                </a>
                <a href="https://www.instagram.com/rkvasne/" target="_blank">
                    <i class="fab fa-instagram"></i>
                    @rkvasne
                </a>
            </div>
            <div class="copyright">
                ¬© <span id="currentYear"></span> Todos os direitos reservados
            </div>
        </div>
    </footer>

    <div id="copyMessage" class="copy-message"></div>

    <div class="tooltip-container">
        <button class="help-button" onclick="toggleHelp()">
            <i class="fas fa-keyboard"></i>
        </button>
        <div class="help-content" id="helpContent">
            <h3>Atalhos de Teclado</h3>
            <ul>
                <li><kbd>Ctrl</kbd> + <kbd>C</kbd> Copiar cor atual</li>
                <li><kbd>Alt</kbd> + <kbd>D</kbd> Alternar tema escuro/claro</li>
                <li><kbd>Alt</kbd> + <kbd>H</kbd> Limpar hist√≥rico</li>
            </ul>
        </div>
    </div>

    <script>
        /**
         * Gerencia o hist√≥rico de cores salvas no LocalStorage.
         * Mant√©m uma lista das √∫ltimas cores utilizadas para acesso r√°pido.
         */
        class ColorHistory {
            constructor(maxSize = 9) { // Limitado a 9 cores
                this.maxSize = maxSize;
                this.colors = JSON.parse(localStorage.getItem('colorHistory') || '[]');
                // Limitar o hist√≥rico existente a 9 cores tamb√©m
                if (this.colors.length > this.maxSize) {
                    this.colors = this.colors.slice(0, this.maxSize);
                    localStorage.setItem('colorHistory', JSON.stringify(this.colors));
                }
                this.updateUI();
            }

            /**
             * Adiciona uma nova cor ao hist√≥rico.
             * @param {number} r - Componente Vermelho (0-255)
             * @param {number} g - Componente Verde (0-255)
             * @param {number} b - Componente Azul (0-255)
             */
            add(r, g, b) {
                const profitCode = rgbToProfitCode(r, g, b);
                const color = {
                    r, g, b,
                    profitCode,
                    timestamp: Date.now()
                };

                // Evitar duplicatas
                const isDuplicate = this.colors.some(c =>
                    c.r === r && c.g === g && c.b === b
                );

                if (!isDuplicate) {
                    this.colors.unshift(color);
                    if (this.colors.length > this.maxSize) {
                        this.colors.pop();
                    }

                    localStorage.setItem('colorHistory', JSON.stringify(this.colors));
                    this.updateUI();
                }
            }

            /**
             * Atualiza a interface do usu√°rio com a lista de hist√≥rico.
             */
            updateUI() {
                const container = document.getElementById('colorHistory');
                if (!container) return;

                container.innerHTML = this.colors.map(color => `
            <div class="history-item" onclick="loadColor(${color.r}, ${color.g}, ${color.b})">
                <div class="color-preview" style="background: rgb(${color.r}, ${color.g}, ${color.b})"></div>
                <div class="color-info">
                    <span>RGB(${color.r}, ${color.g}, ${color.b})</span>
                    <span>C√≥digo: ${color.profitCode}</span>
                </div>
            </div>
        `).join('');
            }
        }

        /**
         * Gerencia o seletor de cores visual (Canvas).
         * Permite selecionar Matiz (Hue) e Satura√ß√£o/Brilho.
         */
        class ColorPicker {
            constructor() {
                this.colorPicker = document.getElementById('colorPicker');
                this.huePicker = document.getElementById('huePicker');
                this.ctx = this.colorPicker.getContext('2d');
                this.hueCtx = this.huePicker.getContext('2d');

                this.currentHue = 0;
                this.selectedColor = { r: 0, g: 0, b: 0 };
                this.isDragging = false;
                this.isDraggingCanvas = false;
                this.lastX = null;
                this.lastY = null;

                this.setupColorPicker();
                this.setupHuePicker();
                this.addEventListeners();
            }

            addEventListeners() {
                // Event listeners para o huePicker
                this.huePicker.addEventListener('mousedown', (e) => {
                    this.isDragging = true;
                    this.handleHueSelection(e);
                });

                // Event listeners para o colorPicker (canvas principal)
                this.colorPicker.addEventListener('mousedown', (e) => {
                    this.isDraggingCanvas = true;
                    this.handleColorSelection(e);
                });

                document.addEventListener('mousemove', (e) => {
                    if (this.isDragging) {
                        this.handleHueSelection(e);
                    }
                    if (this.isDraggingCanvas) {
                        const rect = this.colorPicker.getBoundingClientRect();
                        if (e.clientX >= rect.left && e.clientX <= rect.right &&
                            e.clientY >= rect.top && e.clientY <= rect.bottom) {
                            this.handleColorSelection(e);
                        }
                    }
                });

                document.addEventListener('mouseup', () => {
                    this.isDragging = false;
                    this.isDraggingCanvas = false;
                });

                // Clicks √∫nicos
                this.huePicker.addEventListener('click', (e) => {
                    this.handleHueSelection(e);
                });

                this.colorPicker.addEventListener('click', (e) => {
                    this.handleColorSelection(e);
                });
            }

            setupColorPicker() {
                const gradient = this.ctx.createLinearGradient(0, 0, this.colorPicker.width, 0);
                gradient.addColorStop(0, '#fff');
                gradient.addColorStop(1, `hsl(${this.currentHue}, 100%, 50%)`);
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.colorPicker.width, this.colorPicker.height);

                const gradient2 = this.ctx.createLinearGradient(0, 0, 0, this.colorPicker.height);
                gradient2.addColorStop(0, 'rgba(0,0,0,0)');
                gradient2.addColorStop(1, '#000');
                this.ctx.fillStyle = gradient2;
                this.ctx.fillRect(0, 0, this.colorPicker.width, this.colorPicker.height);
            }

            setupHuePicker() {
                const gradient = this.hueCtx.createLinearGradient(0, 0, this.huePicker.width, 0);
                for (let i = 0; i <= 360; i += 60) {
                    gradient.addColorStop(i / 360, `hsl(${i}, 100%, 50%)`);
                }
                this.hueCtx.fillStyle = gradient;
                this.hueCtx.fillRect(0, 0, this.huePicker.width, this.huePicker.height);
                this.drawHueMarker();
            }

            drawHueMarker() {
                const markerX = (this.currentHue / 360) * this.huePicker.width;

                // Redesenhar o gradiente
                const gradient = this.hueCtx.createLinearGradient(0, 0, this.huePicker.width, 0);
                for (let i = 0; i <= 360; i += 60) {
                    gradient.addColorStop(i / 360, `hsl(${i}, 100%, 50%)`);
                }
                this.hueCtx.fillStyle = gradient;
                this.hueCtx.fillRect(0, 0, this.huePicker.width, this.huePicker.height);

                // Desenhar o indicador
                this.hueCtx.beginPath();
                this.hueCtx.moveTo(markerX, 0);
                this.hueCtx.lineTo(markerX, this.huePicker.height);
                this.hueCtx.strokeStyle = '#fff';
                this.hueCtx.lineWidth = 3;
                this.hueCtx.stroke();
                
                this.hueCtx.strokeStyle = '#000';
                this.hueCtx.lineWidth = 1;
                this.hueCtx.stroke();

                // C√≠rculos nas extremidades
                [0, this.huePicker.height].forEach(y => {
                    this.hueCtx.beginPath();
                    this.hueCtx.arc(markerX, y, 4, 0, Math.PI * 2);
                    this.hueCtx.fillStyle = '#fff';
                    this.hueCtx.fill();
                    this.hueCtx.strokeStyle = '#000';
                    this.hueCtx.stroke();
                });
            }

            handleColorSelection(e) {
                const rect = this.colorPicker.getBoundingClientRect();
                const x = Math.min(Math.max(0, e.clientX - rect.left), this.colorPicker.width - 1);
                const y = Math.min(Math.max(0, e.clientY - rect.top), this.colorPicker.height - 1);

                this.lastX = x;
                this.lastY = y;

                const pixel = this.ctx.getImageData(x, y, 1, 1).data;
                this.selectedColor = {
                    r: pixel[0],
                    g: pixel[1],
                    b: pixel[2]
                };

                this.updateInputs();
            }

            handleHueSelection(e) {
                const rect = this.huePicker.getBoundingClientRect();
                const x = Math.min(Math.max(0, e.clientX - rect.left), this.huePicker.width);
                this.currentHue = (x / this.huePicker.width) * 360;

                this.setupColorPicker();
                this.drawHueMarker();
                
                if (this.lastX !== null && this.lastY !== null) {
                    const pixel = this.ctx.getImageData(this.lastX, this.lastY, 1, 1).data;
                    this.selectedColor = {
                        r: pixel[0],
                        g: pixel[1],
                        b: pixel[2]
                    };
                } else {
                    const centerX = this.colorPicker.width / 2;
                    const centerY = this.colorPicker.height / 2;
                    const pixel = this.ctx.getImageData(centerX, centerY, 1, 1).data;
                    this.selectedColor = {
                        r: pixel[0],
                        g: pixel[1],
                        b: pixel[2]
                    };
                }

                this.updateInputs();
            }

            updateInputs() {
                document.getElementById('red').value = this.selectedColor.r;
                document.getElementById('green').value = this.selectedColor.g;
                document.getElementById('blue').value = this.selectedColor.b;
                
                document.getElementById('rgbSingle').value = 
                    `${this.selectedColor.r}, ${this.selectedColor.g}, ${this.selectedColor.b}`;
                    
                updatePreviewAndResult();
            }
        }

        // Debounce mais eficiente para inputs
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(this, args);
                }, wait);
            };
        }

        // Otimizar renderiza√ß√£o da tabela
        function generateColorTable() {
            const tbody = document.querySelector('#colorTable tbody');
            const fragment = document.createDocumentFragment();
            
            // Cores baseadas em hue (incremento de 5 graus)
            for (let hue = 0; hue <= 355; hue += 5) {
                const row = document.createElement('tr');
                const index = hue / 5;
                const { r, g, b } = hueToRGB(hue);
                const hexColor = rgbToHex(r, g, b);
                const rgbText = `RGB(${r}, ${g}, ${b})`;
                const profitCode = rgbToProfitCode(r, g, b);

                row.innerHTML = `
            <td>${hue}¬∞</td>
            <td>${hexColor}</td>
            <td>${rgbText}</td>
            <td><span class="color-swatch" onclick="updateColorAndCopy(${r}, ${g}, ${b}, '${rgbText}', ${index})" style="background-color: rgb(${r}, ${g}, ${b});"></span></td>
            <td class="copy-column"><button class="copy-icon" onclick="copyText('${rgbText}', ${index})"><i class="far fa-copy"></i></button></td>
            <td>${profitCode}</td>
            <td class="copy-column"><button class="copy-icon" onclick="copyText('${profitCode}', ${index})"><i class="far fa-copy"></i></button></td>
        `;

                fragment.appendChild(row);
            }
            
            tbody.appendChild(fragment);
        }

        /**
         * Exibe uma mensagem flutuante (toast) para o usu√°rio.
         * @param {string} message - Texto da mensagem
         */
        function showError(message) {
            const messageDiv = document.getElementById('copyMessage');
            messageDiv.style.backgroundColor = '#e74c3c';
            messageDiv.style.color = '#ffffff';
            messageDiv.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
            messageDiv.style.opacity = '1';

            if (window.copyMessageTimeout) {
                clearTimeout(window.copyMessageTimeout);
            }

            window.copyMessageTimeout = setTimeout(() => {
                messageDiv.style.opacity = '0';
            }, 2000);
        }

        /**
         * Converte um √¢ngulo de matiz (Hue) para valores RGB.
         * @param {number} hue - √Çngulo em graus (0-360)
         * @returns {Object} Objeto com propriedades r, g, b
         */
        function hueToRGB(hue) {
            const h = hue / 60;
            const c = 255;
            const x = 255 * (1 - Math.abs((h % 2) - 1));

            let r = 0, g = 0, b = 0;

            if (h >= 0 && h < 1) { r = c; g = x; b = 0; }
            else if (h >= 1 && h < 2) { r = x; g = c; b = 0; }
            else if (h >= 2 && h < 3) { r = 0; g = c; b = x; }
            else if (h >= 3 && h < 4) { r = 0; g = x; b = c; }
            else if (h >= 4 && h < 5) { r = x; g = 0; b = c; }
            else if (h >= 5 && h <= 6) { r = c; g = 0; b = x; }

            return {
                r: Math.round(r),
                g: Math.round(g),
                b: Math.round(b)
            };
        }

        /**
         * Converte RGB para string Hexadecimal.
         * @param {number} r - Vermelho (0-255)
         * @param {number} g - Verde (0-255)
         * @param {number} b - Azul (0-255)
         * @returns {string} String no formato #RRGGBB
         */
        function rgbToHex(r, g, b) {
            const toHex = (n) => {
                const hex = n.toString(16).toUpperCase();
                return hex.length === 1 ? '0' + hex : hex;
            };
            return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
        }

        /**
         * Converte String Hexadecimal para objeto RGB.
         * @param {string} hex - String hex (#RRGGBB ou #RGB)
         * @returns {Object|null} Objeto {r,g,b} ou null se inv√°lido
         */
        function hexToRGB(hex) {
            hex = hex.replace(/^#/, '');
            
            // Suporte para hex curto #RGB
            if (hex.length === 3) {
                hex = hex.split('').map(c => c + c).join('');
            }
            
            const num = parseInt(hex, 16);
            if (isNaN(num)) return null;
            
            return {
                r: (num >> 16) & 255,
                g: (num >> 8) & 255,
                b: num & 255
            };
        }

        /**
         * Calcula o c√≥digo num√©rico utilizado pelo ProfitChart.
         * F√≥rmula: R + (G * 256) + (B * 65536)
         */
        function rgbToProfitCode(r, g, b) {
            return (r + (g * 256) + (b * 65536)).toString();
        }

        function copyColorFromPreview() {
            try {
                const red = parseInt(document.getElementById('red').value) || 0;
                const green = parseInt(document.getElementById('green').value) || 0;
                const blue = parseInt(document.getElementById('blue').value) || 0;
                const profitCode = rgbToProfitCode(red, green, blue);

                // Adicionar ao hist√≥rico quando copiar do preview
                if (window.colorHistory) {
                    window.colorHistory.add(red, green, blue);
                }

                const messageDiv = document.getElementById('copyMessage');
                const color = `rgb(${red}, ${green}, ${blue})`;
                const contrastColor = getContrastColor(color);

                // Limpar timeout anterior se existir
                if (window.copyMessageTimeout) {
                    clearTimeout(window.copyMessageTimeout);
                }

                // Atualizar mensagem
                messageDiv.style.backgroundColor = color;
                messageDiv.style.color = contrastColor;
                messageDiv.innerHTML = `<span style="color: ${contrastColor}"><i class="fas fa-check"></i></span> Copiado: ${profitCode}`;
                messageDiv.style.opacity = '1';

                // Copiar para a √°rea de transfer√™ncia
                return navigator.clipboard.writeText(profitCode)
                    .then(() => {
                        window.copyMessageTimeout = setTimeout(() => {
                            messageDiv.style.opacity = '0';
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Erro ao copiar:', err);
                        showError('N√£o foi poss√≠vel copiar o c√≥digo');
                    });
            } catch (error) {
                console.error('Erro:', error);
                showError('Ocorreu um erro inesperado');
            }
        }

        function getContrastColor(rgb) {
            const [r, g, b] = rgb.match(/\d+/g).map(Number);
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            return luminance > 0.5 ? '#000000' : '#ffffff';
        }

        function updateColorAndCopy(r, g, b, rgbText, index) {
            document.getElementById('red').value = r;
            document.getElementById('green').value = g;
            document.getElementById('blue').value = b;
            document.getElementById('rgbSingle').value = `${r}, ${g}, ${b}`;

            updatePreviewAndResult();
            copyText(rgbText, index);

            // Adicionar ao hist√≥rico
            if (window.colorHistory) {
                window.colorHistory.add(r, g, b);
            }
        }
        function updateUrlParams(r, g, b) {
            const newUrl = new URL(window.location);
            newUrl.searchParams.set('r', r);
            newUrl.searchParams.set('g', g);
            newUrl.searchParams.set('b', b);
            window.history.replaceState({}, '', newUrl);
        }

        function copyText(text, rowIndex) {
            try {
                const messageDiv = document.getElementById('copyMessage');
                let color = '';
                let red = 0, green = 0, blue = 0;

                // Determinar a cor baseado no tipo de √≠ndice
                if (typeof rowIndex === 'string' && rowIndex.startsWith('gray-')) {
                    // Para cores em escala de cinza
                    const grayScaleColors = [
                        [255, 255, 255], // Branco
                        [204, 204, 204], // Cinza 80%
                        [153, 153, 153], // Cinza 60%
                        [102, 102, 102], // Cinza 40%
                        [51, 51, 51],    // Cinza 20%
                        [0, 0, 0]        // Preto
                    ];
                    const index = parseInt(rowIndex.replace('gray-', ''));
                    if (grayScaleColors[index]) {
                        [red, green, blue] = grayScaleColors[index];
                        color = `rgb(${red}, ${green}, ${blue})`;
                    }
                } else if (typeof rowIndex === 'number' && rowIndex >= 0) {
                    // Para cores baseadas em hue
                    const hue = rowIndex * 5; // Cada linha representa um incremento de 5 graus
                    const rgbValues = hueToRGB(hue);
                    red = rgbValues.r;
                    green = rgbValues.g;
                    blue = rgbValues.b;
                    color = `rgb(${red}, ${green}, ${blue})`;
                } else {
                    // Para o preview ou outros casos
                    red = parseInt(document.getElementById('red').value) || 0;
                    green = parseInt(document.getElementById('green').value) || 0;
                    blue = parseInt(document.getElementById('blue').value) || 0;
                    color = `rgb(${red}, ${green}, ${blue})`;
                }

                // Limpar timeout anterior
                if (window.copyMessageTimeout) {
                    clearTimeout(window.copyMessageTimeout);
                }

                // Atualizar mensagem
                const contrastColor = getContrastColor(color);
                messageDiv.style.backgroundColor = color;
                messageDiv.style.color = contrastColor;
                messageDiv.innerHTML = `<span style="color: ${contrastColor}"><i class="fas fa-check"></i></span> Copiado: ${text}`;
                messageDiv.style.opacity = '1';

                // Adicionar ao hist√≥rico
                if (window.colorHistory) {
                    window.colorHistory.add(red, green, blue);
                }

                // Copiar para a √°rea de transfer√™ncia
                navigator.clipboard.writeText(text)
                    .then(() => {
                        window.copyMessageTimeout = setTimeout(() => {
                            messageDiv.style.opacity = '0';
                        }, 2000);

                        // Destacar a linha
                        highlightRow(rowIndex);
                    })
                    .catch(err => {
                        console.error('Erro ao copiar:', err);
                        showError('N√£o foi poss√≠vel copiar o texto');
                    });

            } catch (error) {
                console.error('Erro:', error);
                showError('Ocorreu um erro inesperado');
            }
        }

        function highlightRow(rowIndex) {
            document.querySelectorAll('#colorTable tbody tr').forEach(row => {
                row.classList.remove('highlighted-row');
            });

            if (rowIndex !== undefined && rowIndex !== -1) {
                const row = document.querySelector(`tr[data-index="${rowIndex}"]`);
                if (row) {
                    row.classList.add('highlighted-row');
                    localStorage.setItem('lastCopiedRow', rowIndex);
                }
            }
        }

        function updatePreviewAndResult() {
            let red = Math.min(Math.max(parseInt(document.getElementById('red').value) || 0, 0), 255);
            let green = Math.min(Math.max(parseInt(document.getElementById('green').value) || 0, 0), 255);
            let blue = Math.min(Math.max(parseInt(document.getElementById('blue').value) || 0, 0), 255);

            document.getElementById('red').value = red;
            document.getElementById('green').value = green;
            document.getElementById('blue').value = blue;
            
            // Atualizar Hex Input se n√£o estiver focado (para n√£o atrapalhar digita√ß√£o)
            const hexInput = document.getElementById('hexInput');
            if (document.activeElement !== hexInput) {
                hexInput.value = rgbToHex(red, green, blue);
            }

            const resultDiv = document.getElementById('result');
            const previewDiv = document.getElementById('colorPreview');

            const colorCode = red + (green * 256) + (blue * 65536);
            resultDiv.innerHTML = `C√≥digo ProfitChart: <strong>${colorCode}</strong>`;
            previewDiv.style.backgroundColor = `rgb(${red}, ${green}, ${blue})`;
        }

        function loadColor(r, g, b) {
            document.getElementById('red').value = r;
            document.getElementById('green').value = g;
            document.getElementById('blue').value = b;
            document.getElementById('rgbSingle').value = `${r}, ${g}, ${b}`;
            updatePreviewAndResult();
        }

        function shareUrl() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                const messageDiv = document.getElementById('copyMessage');
                messageDiv.style.backgroundColor = '#4a90e2';
                messageDiv.style.color = '#ffffff';
                messageDiv.innerHTML = `<span style="color: #ffffff"><i class="fas fa-share-alt"></i></span> URL copiada para a √°rea de transfer√™ncia`;
                messageDiv.style.opacity = '1';

                if (window.copyMessageTimeout) clearTimeout(window.copyMessageTimeout);
                window.copyMessageTimeout = setTimeout(() => {
                    messageDiv.style.opacity = '0';
                }, 2000);
            }).catch(err => {
                console.error('Erro ao copiar URL:', err);
            });
        }

        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);

            if (params.has('code')) {
                const code = parseInt(params.get('code'));
                const { r, g, b } = codeToRGB(code);
                return { r, g, b };
            }

            return {
                r: Math.min(Math.max(parseInt(params.get('r')) || 0, 0), 255),
                g: Math.min(Math.max(parseInt(params.get('g')) || 0, 0), 255),
                b: Math.min(Math.max(parseInt(params.get('b')) || 0, 0), 255)
            };
        }

        function codeToRGB(code) {
            return {
                r: code & 0xFF,
                g: (code >> 8) & 0xFF,
                b: (code >> 16) & 0xFF
            };
        }

        const rgbSingleInput = document.getElementById('rgbSingle');
        const mask = IMask(rgbSingleInput, {
            mask: '000, 000, 000',
            blocks: {
                '000': {
                    mask: IMask.MaskedRange,
                    from: 0,
                    to: 255,
                    autofix: true
                }
            },
            lazy: false
        });

        rgbSingleInput.addEventListener('input', function () {
            const rgbValues = this.value.split(',').map(v => parseInt(v.trim()));
            if (rgbValues.length === 3 && rgbValues.every(v => v >= 0 && v <= 255)) {
                document.getElementById('red').value = rgbValues[0];
                document.getElementById('green').value = rgbValues[1];
                document.getElementById('blue').value = rgbValues[2];
                updatePreviewAndResult();
            }
        });

        const hexInput = document.getElementById('hexInput');
        hexInput.addEventListener('input', function() {
            let hex = this.value;
            if (!hex.startsWith('#')) {
                hex = '#' + hex;
            }
            
            // Validar formato Hex (3 ou 6 digitos)
            if (/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
                const rgb = hexToRGB(hex);
                if (rgb) {
                    document.getElementById('red').value = rgb.r;
                    document.getElementById('green').value = rgb.g;
                    document.getElementById('blue').value = rgb.b;
                    document.getElementById('rgbSingle').value = `${rgb.r}, ${rgb.g}, ${rgb.b}`;
                    updatePreviewAndResult();
                }
            }
        });
        
        hexInput.addEventListener('blur', function() {
            // Formatar corretamente ao sair do campo se for v√°lido
            let hex = this.value;
             if (!hex.startsWith('#')) {
                hex = '#' + hex;
            }
            if (/^#([0-9A-F]{3}){1,2}$/i.test(hex)) {
                const rgb = hexToRGB(hex);
                if (rgb) {
                     this.value = rgbToHex(rgb.r, rgb.g, rgb.b);
                }
            } else {
                // Reverter para o valor atual dos inputs RGB se inv√°lido
                const r = parseInt(document.getElementById('red').value) || 0;
                const g = parseInt(document.getElementById('green').value) || 0;
                const b = parseInt(document.getElementById('blue').value) || 0;
                this.value = rgbToHex(r, g, b);
            }
        });

        document.querySelectorAll('#red, #green, #blue').forEach(input => {
            input.addEventListener('input', debounce(() => {
                const red = parseInt(document.getElementById('red').value) || 0;
                const green = parseInt(document.getElementById('green').value) || 0;
                const blue = parseInt(document.getElementById('blue').value) || 0;
                rgbSingleInput.value = `${red}, ${green}, ${blue}`;
                updatePreviewAndResult();
            }, 100));
        });

        window.onload = function () {
            // Limpar hist√≥rico existente (opcional - use apenas se quiser resetar o hist√≥rico)
            localStorage.removeItem('colorHistory');
            // Inicializar o hist√≥rico primeiro
            window.colorHistory = new ColorHistory();

            // Resto do c√≥digo existente...
            const colorPicker = new ColorPicker();

            const { r, g, b } = getUrlParams();
            const redInput = document.getElementById('red');
            const greenInput = document.getElementById('green');
            const blueInput = document.getElementById('blue');

            redInput.value = r;
            greenInput.value = g;
            blueInput.value = b;
            rgbSingleInput.value = `${r}, ${g}, ${b}`;

            generateColorTable();

            const lastCopiedRow = localStorage.getItem('lastCopiedRow');
            if (lastCopiedRow) highlightRow(lastCopiedRow);

            updatePreviewAndResult();
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Carregar tema salvo
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-button i').classList.replace('fa-moon', 'fa-sun');
            }
        };

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const themeButton = document.querySelector('.theme-button i');
            
            if (currentTheme === 'dark') {
                html.removeAttribute('data-theme');
                themeButton.classList.remove('fa-sun');
                themeButton.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                themeButton.classList.remove('fa-moon');
                themeButton.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        }

        function toggleHelp() {
            const helpContent = document.getElementById('helpContent');
            if (helpContent.classList.contains('show')) {
                helpContent.classList.remove('show');
            } else {
                helpContent.classList.add('show');
            }
        }

        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + C para copiar a cor atual
            if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'c' && !isInputFocused()) {
                e.preventDefault();
                copyColorFromPreview();
            }
            
            // Alt + D para alternar tema escuro/claro
            if (e.altKey && !e.ctrlKey && !e.metaKey && e.key.toLowerCase() === 'd' && !isInputFocused()) {
                e.preventDefault();
                toggleTheme();
            }
            
            // Alt + H para limpar hist√≥rico
            if (e.altKey && !e.ctrlKey && !e.metaKey && e.key.toLowerCase() === 'h' && !isInputFocused()) {
                e.preventDefault();
                if (window.colorHistory && confirm('Deseja limpar o hist√≥rico de cores?')) {
                    localStorage.removeItem('colorHistory');
                    window.colorHistory = new ColorHistory();
                }
            }
        });

        function isInputFocused() {
            const activeElement = document.activeElement;
            return activeElement.tagName === 'INPUT' || 
                   activeElement.tagName === 'TEXTAREA' || 
                   activeElement.isContentEditable;
        }
    </script>
</body>

</html>